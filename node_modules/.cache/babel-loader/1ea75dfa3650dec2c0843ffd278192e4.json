{"ast":null,"code":"import _objectSpread from \"/Users/donaldnyingifa/man_city/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/Users/donaldnyingifa/man_city/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/donaldnyingifa/man_city/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/donaldnyingifa/man_city/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/donaldnyingifa/man_city/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/donaldnyingifa/man_city/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/donaldnyingifa/man_city/src/Components/signin/index.js\";\nimport React from 'react';\nimport FormField from '../ui/formFields';\nimport { validate } from '../ui/misc';\nimport { firebase } from '../../firebase';\n\nvar SignIn =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(SignIn, _React$Component);\n\n  function SignIn() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, SignIn);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(SignIn)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      formError: false,\n      formSuccess: '',\n      formdata: {\n        email: {\n          element: 'input',\n          value: '',\n          config: {\n            name: 'email_input',\n            type: 'email',\n            placeholder: 'Enter your email'\n          },\n          validation: {\n            required: true,\n            email: true\n          },\n          valid: false,\n          validationMessage: ''\n        },\n        password: {\n          element: 'input',\n          value: '',\n          config: {\n            name: 'password_input',\n            type: 'password',\n            placeholder: 'Enter your password'\n          },\n          validation: {\n            required: true\n          },\n          valid: false,\n          validationMessage: ''\n        }\n      }\n    };\n    return _this;\n  }\n\n  _createClass(SignIn, [{\n    key: \"updateForm\",\n    value: function updateForm(element) {\n      var newFormdata = _objectSpread({}, this.state.formdata);\n\n      var newElement = _objectSpread({}, newFormdata[element.id]);\n\n      newElement.value = element.event.target.value;\n      var validData = validate(newElement);\n      console.log(validData);\n      newElement.valid = validData[0];\n      newElement.validationMessage = validData[1];\n      newFormdata[element.id] = newElement;\n      this.setState({\n        formError: false,\n        formdata: newFormdata\n      });\n    }\n  }, {\n    key: \"submitForm\",\n    value: function submitForm(event) {\n      var _this2 = this;\n\n      event.preventDefault();\n      var dataToSubmit = {};\n      var formIsValid = true;\n\n      for (var key in this.state.formdata) {\n        dataToSubmit[key] = this.state.formdata[key].value;\n        formIsValid = this.state.formdata[key].valid && formIsValid;\n      }\n\n      if (formIsValid) {\n        firebase.auth().signInWithEmailAndPassword(dataToSubmit.email, dataToSubmit.password).then(function () {\n          //console.lod('user is auth')\n          _this2.props.history.push('/dashboard');\n        }).catch(function (error) {\n          _this2.setState({\n            formError: true\n          });\n        });\n      } else {\n        this.setState({\n          formError: true\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"signin_wrapper\",\n        style: {\n          margin: '100px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        onSubmit: function onSubmit(event) {\n          return _this3.submitForm(event);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, \"Please Login\"), React.createElement(FormField, {\n        id: 'email',\n        formdata: this.state.formdata.email,\n        change: function change(element) {\n          return _this3.updateForm(element);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }), React.createElement(FormField, {\n        id: 'password',\n        formdata: this.state.formdata.password,\n        change: function change(element) {\n          return _this3.updateForm(element);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }), this.state.formError ? React.createElement(\"div\", {\n        className: \"error_label\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, \"Something is wrong, try again.\") : null, React.createElement(\"button\", {\n        onClick: function onClick(event) {\n          return _this3.submitForm(event);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, \"Log in\"))));\n    }\n  }]);\n\n  return SignIn;\n}(React.Component);\n\nexport default SignIn;","map":{"version":3,"sources":["/Users/donaldnyingifa/man_city/src/Components/signin/index.js"],"names":["React","FormField","validate","firebase","SignIn","state","formError","formSuccess","formdata","email","element","value","config","name","type","placeholder","validation","required","valid","validationMessage","password","newFormdata","newElement","id","event","target","validData","console","log","setState","preventDefault","dataToSubmit","formIsValid","key","auth","signInWithEmailAndPassword","then","props","history","push","catch","error","margin","submitForm","updateForm","Component"],"mappings":"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","sourcesContent":["import React from 'react'\nimport FormField from '../ui/formFields'\nimport { validate } from '../ui/misc'\nimport { firebase } from '../../firebase'\n\nclass SignIn extends React.Component {\n\n  state = {\n      formError:false,\n      formSuccess:'',\n      formdata:{\n          email:{\n              element:'input',\n              value:'',\n              config:{\n                  name:'email_input',\n                  type: 'email',\n                  placeholder: 'Enter your email'\n              },\n              validation:{\n                  required: true,\n                  email: true\n              },\n              valid: false,\n              validationMessage:''\n          },\n          password:{\n              element:'input',\n              value:'',\n              config:{\n                  name:'password_input',\n                  type: 'password',\n                  placeholder: 'Enter your password'\n              },\n              validation:{\n                  required: true\n              },\n              valid: false,\n              validationMessage:''\n          },\n\n      }\n  }\n\n  updateForm(element){\n    const newFormdata = {...this.state.formdata}\n    const newElement = { ...newFormdata[element.id]}\n\n    newElement.value = element.event.target.value;\n\n    let validData = validate(newElement)\n    console.log(validData)\n    newElement.valid = validData[0];\n    newElement.validationMessage = validData[1];\n\n    newFormdata[element.id] = newElement;\n\n    this.setState({\n        formError: false,\n        formdata: newFormdata\n    })\n  }\n\n  submitForm(event){\n      event.preventDefault();\n\n      let dataToSubmit = {};\n      let formIsValid = true;\n\n      for(let key in this.state.formdata){\n          dataToSubmit[key] = this.state.formdata[key].value;\n          formIsValid = this.state.formdata[key].valid && formIsValid;\n      }\n\n      if(formIsValid){\n        firebase.auth()\n        .signInWithEmailAndPassword(\n            dataToSubmit.email,\n            dataToSubmit.password\n        ).then(()=>{\n            //console.lod('user is auth')\n            this.props.history.push('/dashboard')\n        }).catch(error =>{\n            this.setState({\n                formError: true\n            })\n        })\n      } else {\n          this.setState({\n              formError: true\n          })\n      }\n  }\n\n  render () {\n      return (\n          <div className=\"container\">\n            <div className=\"signin_wrapper\" style={{margin:'100px'}}>\n              <form onSubmit={(event)=> this.submitForm(event)}>\n                <h2>Please Login</h2>\n\n                <FormField\n                    id={'email'}\n                    formdata={this.state.formdata.email}\n                    change={(element)=> this.updateForm(element)}\n                  />\n                <FormField\n                    id={'password'}\n                    formdata={this.state.formdata.password}\n                    change={(element)=> this.updateForm(element)}\n                  />\n                  { this.state.formError ?\n                    <div className=\"error_label\">Something is wrong, try again.</div>\n                    :null}\n                <button onClick={(event)=> this.submitForm(event)}>Log in</button>\n              </form>\n            </div>\n          </div>\n      );\n  }\n}\n\nexport default SignIn;\n"]},"metadata":{},"sourceType":"module"}